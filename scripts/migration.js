const fs = require("fs");
const path = require("path");
const db = require("../config/db");

const migrationsDir = __dirname;
const files = fs.readdirSync(migrationsDir)
  .filter(f => f.endsWith('.sql'))
  .sort();

  
(async () => {
  try {
    for (const file of files) {
      const filePath = path.join(migrationsDir, file);
      const sql = fs.readFileSync(filePath, "utf8");
      console.log(`üîÑ Executando: ${file}`);
      await db.query(sql);
    }
    console.log("‚úÖ Todas as migra√ß√µes foram aplicadas com sucesso!");
    process.exit(0);
  } catch (error) {
    console.error("‚ùå Erro ao executar migra√ß√£o:", error.message);
    process.exit(1);
  }
})();
